# ~/.tmux.conf
# 以下のように省略して記述する
# set-option        => set
# set-window-option => setw

set -g default-shell /usr/bin/zsh
set -g status on
set -g status-interval 2
set -g status-utf8 on
set -g status-justify "left"

# マウスでペイン移動
set -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on

# pane-active-border
set -g pane-active-border-fg black
set -g pane-active-border-bg cyan

# 新しいウィンドウのベース番号
set -g base-index 1
# 全てのベルを無視
set -g bell-action none
# 各セッションで保持するバッファ数
#set -g buffer-limit 20
# 256色端末を使用
set -g default-terminal "screen-256color"
# ウィンドウ履歴で保持される最大行数
set -g history-limit 500000
# Escapeキー入力時の待ち時間(0.5秒)をキャンセル
set -s escape-time 0

set -g status-left-length 80
set -g status-right-length 50

# status
set -g status-fg cyan
set -g status-bg black

set -g status-left "#(~/dotfiles/.tmux/tmux-powerline/powerline.sh left)"
set -g status-right "#(~/dotfiles/.tmux/tmux-powerline/powerline.sh right)"
#set -g status-left '#[fg=white,bg=blue][S:#S]#[default]'
#set -g status-right '#[fg=black,bg=cyan][CPU=#(getCpuUsage.sh) MEM=#(getMemUsage.sh)]#[fg=white,bg=blue][%Y/%m/%d(%a)%H:%M]#[default]'

setw -g window-status-fg blue
setw -g window-status-bg black

setw -g window-status-current-fg white
setw -g window-status-current-bg blue

# ウィンドウを実行コマンド名で自動リネーム
setw -g automatic-rename on
# スクロールモード、コピーモード、選択モードのキーバインド
setw -g mode-keys emacs
# ウィンドウで動作があるとステータスラインでハイライト
setw -g monitor-activity on
# UTF-8 シーケンスが現れることに備える
setw -g utf8 on

# プレフィックスキーを設定
set -g prefix C-z
unbind-key C-b
bind-key C-z send-prefix

# C-Right,C-Leftでウィンドウ切り替え
#* Ctrl and arrow keys doesn't work in putty! What do I do?
#http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/FAQ
#set -g terminal-overrides "xterm*:kLFT5=\eOD:kRIT5=\eOC:kUP5=\eOA:kDN5=\eOB:smkx@:rmkx@:colors=256"
bind-key -n C-Right next-window
bind-key -n C-Left previous-window

# コピーモードに入る
bind-key y copy-mode
# ペーストバッファの内容をカレントウィンドウに挿入
bind-key p paste-buffer

# Yで一行コピー
#http://blog.m4i.jp/entry/2012/02/13/155233
bind-key -t vi-copy Y copy-line

# ~/.tmux.conf をリロード
#bind-key r source-file ~/.tmux.conf; display "Reloaded!"

# ペインを水平・垂直分割
bind-key s split-window -h
bind-key v split-window -v
# h,j,k,lでペインを切り替え
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# ~/.tmux.confの読み込みキーバインド
unbind r
bind   r source-file ~/.tmux.conf \; display-message "tmux RELOADED!!"

# tmuxセッションをkillする時に下部に確認ダイアログを表示する
unbind K
bind   K confirm-before "kill-window"

# プレフィックス
# C-b        | send-prefix                   | プレフィックスキーを送信

# ウィンドウとペイン
# c          | new-window                    | 新しいウィンドウを作成
# n          | next-window                   | 次のウィンドウへ移動
# p          | previous-window               | 前のウィンドウへ移動
# M-n        | next-window -a                | 次のウィンドウへ移動(移動時にベルを発生)
# M-p        | previous-window -a            | 前のウィンドウへ移動(移動時にベルを発生)
# l          | last-window                   | 直前のウィンドウを選択
# w          | choose-window                 | ウィンドウをリストから対話的に選択
# 0-9        | select-window -t :0-9         | 0～9のウィンドウを選択

# "          | split-window                  | ペインを垂直分割
# %          | split-window -h               | ペインを水平分割
# -r Up      | select-pane -U                | 上のペインを選択
# -r Down    | select-pane -D                | 下のペインを選択
# -r Left    | select-pane -L                | 左のペインを選択
# -r Right   | select-pane -R                | 右のペインを選択
# o          | select-pane -t :.+            | 次のペインを選択
# ;          | last-pane                     | 直前のペインを選択
# q          | display-panes                 | 各ペインにインジケータを表示(インジケータ表示中、ペインを '0～9' キーで選択可能)
# C-o        | rotate-window                 | ペインを上へ回転
# M-o        | rotate-window -D              | ペインを下へ回転
# {          | swap-pane -U                  | 前のペインと入れ替え
# }          | swap-pane -D                  | 次のペインと入れ替え
# Space      | next-layout                   | 次のレイアウトでペインを再配置
# M-1        | select-layout even-horizontal | ペインを均等に左から右へ並べる
# M-2        | select-layout even-vertical   | ペインを均等に上から下へ並べる
# M-3        | select-layout main-horizontal | 大きいペインを上に配置し、他を下方で左から右へ並べる
# M-4        | select-layout main-vertical   | 大きいペインを左に配置し、他を右側で上から下へ並べる
# M-5        | select-layout tiled           | ペインを列・カラム中で可能な限り均等に並べる
# -r C-Up    | resize-pane -U                | ペインを上へ1単位リサイズ
# -r C-Down  | resize-pane -D                | ペインを下へ1単位リサイズ
# -r C-Left  | resize-pane -L                | ペインを左へ1単位リサイズ
# -r C-Right | resize-pane -R                | ペインを右へ1単位リサイズ
# -r M-Up    | resize-pane -U 5              | ペインを上へ5単位リサイズ
# -r M-Down  | resize-pane -D 5              | ペインを下へ5単位リサイズ
# -r M-Left  | resize-pane -L 5              | ペインを左へ5単位リサイズ
# -r M-Right | resize-pane -R 5              | ペインを右へ5単位リサイズ
# !          | break-pane                    | ペインを新しいウィンドウに切り離す

# [          | copy-mode                     | コピーモードに入る
# PPage      | copy-mode -u                  | コピーモードに入り、1 ページ上にスクロール

# t          | clock-mode                    | 大きな時計を表示

# クライアントとセッション
# (          | switch-client -p              | 前のセッションに切り替え
# )          | switch-client -n              | 次のセッションに切り替え
# L          | switch-client -l              | 直前のセッションに切り替え
# s          | choose-session                | セッションをリストから対話的に選択

# d          | detach-client                 | カレントクライアントをデタッチ
# r          | refresh-client                | カレントクライアントを更新
# D          | choose-client                 | クライアントをリストから対話的に選択
# C-z        | suspend-client                | SIGTSTP (tty stop) を送信してクライアントをサスペンド
# ~          | show-messages                 | クライアントごとに保存されたログメッセージを表示

# バッファ
# #          | list-buffers                  | バッファを列挙
# -          | delete-buffer                 | 先頭のバッファを削除
# =          | choose-buffer                 | バッファをリストから対話的に選択
# ]          | paste-buffer                  | バッファの内容をカレントウィンドウに挿入

# その他
# :          | command-prompt                | コマンドプロンプトを開く
# ?          | list-keys                     | キーバインドを列挙
# i          | display-message               | ステータスラインにメッセージを表示

# '          | command-prompt -p index "select-window -t ':%%'"      | ウィンドウを選択
# f          | command-prompt "find-window '%%'"                     | ウィンドウ名、タイトル、表示されている内容(履歴は除く)からウィンドウを検索
# .          | command-prompt "move-window -t '%%'"                  | ウィンドウを移動
# ,          | command-prompt -I #W "rename-window '%%'"             | ウィンドウをリネーム
# $          | command-prompt -I #S "rename-session '%%'"            | セッションをリネーム

# &          | confirm-before -p "kill-window #W? (y/n)" kill-window | カレントウィンドウをkill
# x          | confirm-before -p "kill-pane #P? (y/n)" kill-pane     | カレントペインをkill

# コピーモード(mode-keys vi)

# space      | 始点選択
# enter      | 終点選択

