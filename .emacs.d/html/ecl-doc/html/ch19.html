<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 19. Streams</title><link rel="stylesheet" type="text/css" href="ecl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="The ECL manual"><link rel="up" href="pt01.html" title="Part I. Standards"><link rel="prev" href="re47.html" title="Files C dictionary"><link rel="next" href="ch19s02.html" title="19.2. C Reference"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 19. Streams</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="re47.html">Prev</a> </td><th width="60%" align="center">Part I. Standards</th><td width="20%" align="right"> <a accesskey="n" href="ch19s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 19. Streams"><div class="titlepage"><div><div><h2 class="title"><a name="ansi.streams"></a>Chapter 19. Streams</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch19.html#ansi.streams.ansi">19.1. ANSI Streams</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#ansi.streams.types">19.1.1. Supported types</a></span></dt><dt><span class="section"><a href="ch19.html#ansi.streams.io">19.1.2. Element types</a></span></dt><dt><span class="section"><a href="ch19.html#ansi.streams.formats">19.1.3. External formats</a></span></dt></dl></dd><dt><span class="section"><a href="ch19s02.html">19.2. C Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="re48.html">Streams C dictionary</a></span><span class="refpurpose"> — Common Lisp and C equivalence</span></dt></dl></dd></dl></div>
 

 <div class="section" title="19.1. ANSI Streams"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ansi.streams.ansi"></a>19.1. ANSI Streams</h2></div></div></div>
 

 <div class="section" title="19.1.1. Supported types"><div class="titlepage"><div><div><h3 class="title"><a name="ansi.streams.types"></a>19.1.1. Supported types</h3></div></div></div>
  

  <p><span class="application">ECL</span> implements all stream types described in <a class="xref" href="bi01.html#bib.ANSI">ANSI</a>. Additionally,
  when configured with option <code class="option">--enable-clos-streams</code>, <span class="application">ECL</span>
  includes a version of Gray streams where any object that implements the
  appropiate methods (<code class="function">stream-input-p</code>,
  <code class="function">stream-read-char</code>, etc) is a valid argument for the
  functions that expect streams, such as <code class="function">read</code>,
  <code class="function">print</code>, etc.</p>

 </div>

 <div class="section" title="19.1.2. Element types"><div class="titlepage"><div><div><h3 class="title"><a name="ansi.streams.io"></a>19.1.2. Element types</h3></div></div></div>
  

  <p><span class="application">ECL</span> distinguishes between two kinds of streams: character streams and byte streams. <span class="emphasis"><em>Character streams</em></span> only accept and produce characters, written or read one by one, with <code class="function">write-char</code> or <code class="function">read-char</code>, or in chunks, with <code class="function">write-sequence</code> or any of the Lisp printer functions. Character operations are conditioned by the external format, as described in <a class="xref" href="ch19.html#ansi.streams.formats" title="19.1.3. External formats">Section 19.1.3</a></p>

  <p>ANSI Common Lisp also supports binary streams. Here input and output is performed in chunks of bits. Binary streams are created with the function <code class="function">open</code> passing as argument a subtype of <span class="type">integer</span> and the implementation is free to round up that integer type to the closest size it supports. In particular <span class="application">ECL</span> rounds up the size to a multiple of a byte. For example, the form <code class="code">(open "foo.bin" :direction :output :element-type '(unsigned-byte 13))</code>, will open the file <code class="filename">foo.bin</code> for writing, using 16-bit words as the element type.</p>
 </div>

 <div class="section" title="19.1.3. External formats"><div class="titlepage"><div><div><h3 class="title"><a name="ansi.streams.formats"></a>19.1.3. External formats</h3></div></div></div>
   

   <p>An <span class="emphasis"><em>external format</em></span> is an encoding for characters that maps character codes to a sequence of bytes, in a one-to-one or one-to-many fashion. External formats are also known as "character encodings" in the programming world and are an essential ingredient to be able to read and write text in different languages and alphabets.</p>

   <p><span class="application">ECL</span> has one of the most complete supports for <span class="emphasis"><em>external formats</em></span>, covering all of the usual codepages from the Windows and Unix world, up to the more recent <acronym class="acronym">UTF-8</acronym>, <acronym class="acronym">UCS-2</acronym> and <acronym class="acronym">UCS-4</acronym> formats, all of them with big and small endian variants, and considering different encodings for the newline character.</p>

   <p>However, the set of supported external formats depends on the size of the space of character codes. When <span class="application">ECL</span> is built with Unicode support (the default option), it can represent all known characters from all known codepages, and thus all external formats are supported. However, when <span class="application">ECL</span> is built with the restricted character set, it can only use one codepage (the one provided by the C library), with a few variants for the representation of end-of-line characters.</p>

   <p>In <span class="application">ECL</span>, an external format designator is defined recursively as either a symbol or a list of symbols. The grammar is as follows
</p><pre class="screen">external-format-designator := 
   symbol |
   ( {symbol}+ )
</pre><p>
and the table of known symbols is shown below. Note how some symbols (<code class="code">:cr</code>, <code class="code">:little-endian</code>, etc) just modify other external formats.</p>

<div class="table"><a name="table.external-formats"></a><p class="title"><b>Table 19.1. Stream external formats</b></p><div class="table-contents">
  
  <table summary="Stream external formats" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Symbols</th><th>Codepage or encoding</th><th>Unicode required</th></tr></thead><tbody><tr><td><span class="symbol">:cr</span></td><td><code class="code">#\Newline</code> is Carriage Return</td><td>No</td></tr><tr><td><span class="symbol">:crlf</span></td><td><code class="code">#\Newline</code> is Carriage Return followed by Linefeed</td><td>No</td></tr><tr><td><span class="symbol">:lf</span></td><td><code class="code">#\Newline</code> is Linefeed</td><td>No</td></tr><tr><td><span class="symbol">:little-endian</span></td><td>Modify <acronym class="acronym">UCS</acronym> to use little endian encoding.</td><td>No</td></tr><tr><td><span class="symbol">:big-endian</span></td><td>Modify <acronym class="acronym">UCS</acronym> to use big endian encoding.</td><td>No</td></tr><tr><td><span class="symbol">:utf-8</span> <span class="symbol">ext:utf8</span></td><td>Unicode <acronym class="acronym">UTF-8</acronym></td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-2</span> <span class="symbol">ext:ucs2</span> <span class="symbol">ext:utf-16</span> <span class="symbol">ext:utf16</span>
<span class="symbol">ext:unicode</span></td><td><acronym class="acronym">UCS-2</acronym> encoding with <acronym class="acronym">BOM</acronym>.</td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-2le</span> <span class="symbol">ext:ucs2le</span> <span class="symbol">ext:utf-16le</span></td><td><acronym class="acronym">UCS-2</acronym> with big-endian encoding</td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-2be</span> <span class="symbol">ext:ucs2be</span> <span class="symbol">ext:utf-16be</span></td><td><acronym class="acronym">UCS-2</acronym> with big-endian encoding</td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-4</span> <span class="symbol">ext:ucs4</span> <span class="symbol">ext:utf-32</span> <span class="symbol">ext:utf32</span></td><td><acronym class="acronym">UCS-4</acronym> encoding with <acronym class="acronym">BOM</acronym>.</td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-4le</span> <span class="symbol">ext:ucs4le</span> <span class="symbol">ext:utf-32le</span></td><td><acronym class="acronym">UCS-4</acronym> with big-endian encoding</td><td>Yes</td></tr><tr><td><span class="symbol">:ucs-4be</span> <span class="symbol">ext:ucs4be</span> <span class="symbol">ext:utf-32be</span></td><td><acronym class="acronym">UCS-4</acronym> with big-endian encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-1</span> <span class="symbol">ext:iso8859-1</span> <span class="symbol">ext:latin-1</span> <span class="symbol">ext:cp819</span>  <span class="symbol">ext:ibm819</span></td><td>Latin-1 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-2</span> <span class="symbol">ext:iso8859-2</span> <span class="symbol">ext:latin-2</span> <span class="symbol">ext:latin2</span></td><td>Latin-2 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-3</span> <span class="symbol">ext:iso8859-3</span> <span class="symbol">ext:latin-3</span> <span class="symbol">ext:latin3</span></td><td>Latin-3 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-4</span> <span class="symbol">ext:iso8859-4</span> <span class="symbol">ext:latin-4</span> <span class="symbol">ext:latin4</span></td><td>Latin-4 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-5</span> <span class="symbol">ext:cyrillic</span></td><td>Latin-5 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-6</span> <span class="symbol">ext:arabic</span> <span class="symbol">ext:asmo-708</span> <span class="symbol">ext:ecma-114</span></td><td>Latin-6 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-7</span> <span class="symbol">ext:greek8</span> <span class="symbol">ext:greek</span> <span class="symbol">ext:ecma-118</span></td><td>Greek encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-8</span> <span class="symbol">ext:hebrew</span></td><td>Hebrew encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-9</span> <span class="symbol">ext:latin-5</span> <span class="symbol">ext:latin5</span></td><td>Latin-5 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-10</span> <span class="symbol">ext:iso8859-10</span> <span class="symbol">ext:latin-6</span> <span class="symbol">ext:latin6</span></td><td>Latin-6 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-13</span> <span class="symbol">ext:iso8859-13</span> <span class="symbol">ext:latin-7</span> <span class="symbol">ext:latin7</span></td><td>Latin-7 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-14</span> <span class="symbol">ext:iso8859-14</span> <span class="symbol">ext:latin-8</span> <span class="symbol">ext:latin8</span></td><td>Latin-8 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:iso-8859-15</span> <span class="symbol">ext:iso8859-15</span> <span class="symbol">ext:latin-9</span> <span class="symbol">ext:latin9</span></td><td>Latin-7 encoding</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp437</span> <span class="symbol">ext:ibm-437</span></td><td>IBM CP 437</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp850</span> <span class="symbol">ext:ibm-850</span> <span class="symbol">ext:cp850</span></td><td>Windows CP 850</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp852</span> <span class="symbol">ext:ibm-852</span></td><td>IBM CP 852</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp855</span> <span class="symbol">ext:ibm-855</span></td><td>IBM CP 855</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp860</span> <span class="symbol">ext:ibm-860</span></td><td>IBM CP 860</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp861</span> <span class="symbol">ext:ibm-861</span></td><td>IBM CP 861</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp862</span> <span class="symbol">ext:ibm-862</span> <span class="symbol">ext:cp862</span></td><td>Windows CP 862</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp863</span> <span class="symbol">ext:ibm-863</span></td><td>IBM CP 863</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp864</span> <span class="symbol">ext:ibm-864</span></td><td>IBM CP 864</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp865</span> <span class="symbol">ext:ibm-865</span></td><td>IBM CP 865</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp866</span> <span class="symbol">ext:ibm-866</span> <span class="symbol">ext:cp866</span></td><td>Windows CP 866</td><td>Yes</td></tr><tr><td><span class="symbol">ext:dos-cp869</span> <span class="symbol">ext:ibm-869</span></td><td>IBM CP 869</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp932</span> <span class="symbol">ext:windows-932</span> <span class="symbol">ext:cp932</span></td><td>Windows CP 932</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp936</span> <span class="symbol">ext:windows-936</span> <span class="symbol">ext:cp936</span></td><td>Windows CP 936</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp949</span> <span class="symbol">ext:windows-949</span> <span class="symbol">ext:cp949</span></td><td>Windows CP 949</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp950</span> <span class="symbol">ext:windows-950</span> <span class="symbol">ext:cp950</span></td><td>Windows CP 950</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1250</span> <span class="symbol">ext:windows-1250</span> <span class="symbol">ext:ms-ee</span></td><td>Windows CP 1250</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1251</span> <span class="symbol">ext:windows-1251</span> <span class="symbol">ext:ms-cyrl</span></td><td>Windows CP 1251</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1252</span> <span class="symbol">ext:windows-1252</span> <span class="symbol">ext:ms-ansi</span></td><td>Windows CP 1252</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1253</span> <span class="symbol">ext:windows-1253</span> <span class="symbol">ext:ms-greek</span></td><td>Windows CP 1253</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1254</span> <span class="symbol">ext:windows-1254</span> <span class="symbol">ext:ms-turk</span></td><td>Windows CP 1254</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1255</span> <span class="symbol">ext:windows-1255</span> <span class="symbol">ext:ms-hebr</span></td><td>Windows CP 1255</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1256</span> <span class="symbol">ext:windows-1256</span> <span class="symbol">ext:ms-arab</span></td><td>Windows CP 1256</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1257</span> <span class="symbol">ext:windows-1257</span> <span class="symbol">ext:winbaltrim</span></td><td>Windows CP 1257</td><td>Yes</td></tr><tr><td><span class="symbol">ext:windows-cp1258</span> <span class="symbol">ext:windows-1258</span></td><td>Windows CP 1258</td><td>Yes</td></tr></tbody></table>
</div></div><br class="table-break">

 </div>
 </div>

 

</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="re47.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch19s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Files C dictionary </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 19.2. C Reference</td></tr></table></div></body></html>
