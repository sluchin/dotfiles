

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Distutilsの紹介 &mdash; Python 2.7ja1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7ja1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 2.7ja1 documentation 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="top" title="Python 2.7ja1 documentation" href="../index.html" />
    <link rel="up" title="Python モジュールの配布" href="index.html" />
    <link rel="next" title="setup スクリプトを書く" href="setupscript.html" />
    <link rel="prev" title="Python モジュールの配布" href="index.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/_jp.js"></script>
    
 

  </head>
  <body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="setupscript.html" title="setup スクリプトを書く"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="Python モジュールの配布"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="../index.html">Python 2.7ja1 documentation</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">Python モジュールの配布</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">Distutilsの紹介</a><ul>
<li><a class="reference internal" href="#distutils-concepts">概念と用語</a></li>
<li><a class="reference internal" href="#distutils-simple-example">簡単な例</a></li>
<li><a class="reference internal" href="#python">Python 一般の用語</a></li>
<li><a class="reference internal" href="#distutils-term">Distutils 固有の用語</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="index.html"
                        title="前の章へ">Python モジュールの配布</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="setupscript.html"
                        title="次の章へ">setup スクリプトを書く</a></p>
  <h3>このページ</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/distutils/introduction.txt"
           rel="nofollow">ソースコードを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="distutils">
<span id="distutils-intro"></span><h1>Distutilsの紹介<a class="headerlink" href="#distutils" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このドキュメントで扱っている内容は、 Distutils を使った Python  モジュールの配布で、とりわけ開発者/配布者の役割に重点を置いています:
Python モジュールのインストールに関する情報を探しているのなら、 <a class="reference internal" href="../install/index.html#install-index"><em>Python モジュールのインストール</em></a>
を参照してください。</p>
<div class="section" id="distutils-concepts">
<span id="id1"></span><h2>概念と用語<a class="headerlink" href="#distutils-concepts" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Distutils の使い方は、モジュール開発者とサードパーティ製のモジュールをインストールするユーザ/管理者のどちらにとってもきわめて単純です。開発者側のやるべきことは (もちろん、しっかりした実装で、詳しく文書化され、よくテストされたコードを書くことは別として！) 以下の項目になります:</p>
<ul class="simple">
<li>setup スクリプト (<tt class="file docutils literal"><span class="pre">setup.py</span></tt> という名前にするのがならわし) を書く</li>
<li>(必要があれば) setup 設定ファイルを書く</li>
<li>ソースコード配布物を作成する</li>
<li>(必要があれば) 一つまたはそれ以上のビルド済み (バイナリ) 形式の配布物を作成する</li>
</ul>
<p>これらの作業については、いずれもこのドキュメントで扱っています。</p>
<p>全てのモジュール開発者が複数の実行プラットフォームを利用できるわけではないので、全てのプラットフォーム向けにビルド済みの配布物を提供してもらえると期待するわけにはいきません。ですから、仲介を行う人々、いわゆる <em>パッケージ作成者 (packager)</em> がこの問題を解決すべく立ち上がってくれることが望ましいでしょう。パッケージ作成者はモジュール開発者がリリースしたソースコード配布物を、一つまたはそれ以上のプラットフォーム上でビルドして、得られたビルド済み配布物をリリースすることになります。したがって、ほとんどの一般的なプラットフォームにおけるユーザは、setup スクリプト一つ実行せず、コードを一行たりともコンパイルしなくても、使っているプラットフォーム向けのきわめて普通の方法でほとんどの一般的な Python モジュール配布物をインストールできるでしょう。</p>
</div>
<div class="section" id="distutils-simple-example">
<span id="id2"></span><h2>簡単な例<a class="headerlink" href="#distutils-simple-example" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>setup スクリプトは通常単純なものですが、Python で書かれているため、スクリプト中で何かを処理しようと考えたとき特に制限はありません。とはいえ、
setup スクリプト中に何かコストの大きな処理を行うときは十分注意してください。 autoconf 形式の設定スクリプトとは違い、 setup
スクリプトはモジュール配布物をビルドしてインストールする中で複数回実行されることがあります。</p>
<p><tt class="file docutils literal"><span class="pre">foo.py</span></tt> という名前のファイルに収められている <tt class="xref py py-mod docutils literal"><span class="pre">foo</span></tt> という名前のモジュールを配布したいだけなら、setup
スクリプトは以下のような単純なものになります:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>
<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">,</span>
      <span class="n">py_modules</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">],</span>
      <span class="p">)</span>
</pre></div>
</div>
<p>以下のことに注意してください:</p>
<ul class="simple">
<li>Distutils に与えなければならない情報のほとんどは、  <tt class="xref py py-func docutils literal"><span class="pre">setup()</span></tt> 関数のキーワード引数として与えます。</li>
<li>キーワード引数は二つのカテゴリ: パッケージのメタデータ  (パッケージ名、バージョン番号) 、パッケージに何が収められているかの情報 (上の場合は
pure Python モジュールのリスト)、に行き着きます。</li>
<li>モジュールはファイル名ではなく、モジュール名で指定します (パッケージと拡張モジュールについても同じです)</li>
<li>作者名、電子メールアドレス、プロジェクトの URL といった追加のメタデータを入れておくよう奨めます ( <a class="reference internal" href="setupscript.html#setup-script"><em>setup スクリプトを書く</em></a> の例を参照してください)</li>
</ul>
<p>このモジュールのソースコード配布物を作成するには、上記のコードが入った setup スクリプト <tt class="file docutils literal"><span class="pre">setup.py</span></tt>
を作成して、以下のコマンド:</p>
<div class="highlight-python"><pre>python setup.py sdist</pre>
</div>
<p>を実行します。</p>
<p>この操作を行うと、アーカイブファイル (例えば Unixでは tarball、Windows では ZIP ファイル) を作成します。アーカイブファイルには、setup スクリプト <tt class="file docutils literal"><span class="pre">setup.py</span></tt> と、配布したいモジュール <tt class="file docutils literal"><span class="pre">foo.py</span></tt>
が入っています。アーカイブファイルの名前は <tt class="file docutils literal"><span class="pre">foo-1.0.targ.gz</span></tt> (または <tt class="file docutils literal"><span class="pre">.zip</span></tt>) になり、展開するとディレクトリ <tt class="file docutils literal"><span class="pre">foo-1.0</span></tt> を作成します。</p>
<p>エンドユーザが <tt class="xref py py-mod docutils literal"><span class="pre">foo</span></tt> モジュールをインストールしたければ、 <tt class="file docutils literal"><span class="pre">foo-1.0.tar.gz</span></tt> (または <tt class="file docutils literal"><span class="pre">.zip</span></tt>)
をダウンロードし、パッケージを展開して、以下のスクリプトを &#8212; <tt class="file docutils literal"><span class="pre">foo-1.0</span></tt>  ディレクトリ中で &#8212; 実行します:</p>
<div class="highlight-python"><pre>python setup.py install</pre>
</div>
<p>この操作を行うと、インストールされている Python での適切なサードパーティ製モジュール置き場に <tt class="file docutils literal"><span class="pre">foo.py</span></tt> を完璧にコピーします．</p>
<p>ここで述べた簡単な例では、 Distutils の基本的な概念のいくつかを示しています。まず、開発者とインストール作業者は同じ基本インタフェース、すなわち
setup スクリプトを使っています。二人の作業の違いは、使っている Distutils <em>コマンド (command)</em> にあります:
<strong class="command">sdist</strong> コマンドは、ほぼ完全に開発者だけが対象となる一方、 <strong class="command">install</strong> はどちらかというとインストール作業者向けです (とはいえ、ほとんどの開発者は自分のコードをインストールしたくなることがあるでしょう)。</p>
<p>ユーザにとって本当に簡単なものにしたいのなら、一つまたはそれ以上のビルド済み配布物を作ってあげられます。例えば、Windows マシン上で作業をしていて、他の Windows ユーザにとって簡単な配布物を提供したいのなら、実行可能な形式の (このプラットフォーム向けのビルド済み配布物としてはもっとも適切な) インストーラを作成できます。これには <strong class="command">bdist_wininst</strong> を使います。例えば:</p>
<div class="highlight-python"><pre>python setup.py bdist_wininst</pre>
</div>
<p>とすると、実行可能なインストーラ形式、 <tt class="file docutils literal"><span class="pre">foo-1.0.win32.exe</span></tt> が現在のディレクトリに作成されます。</p>
<p>その他の有用な配布形態としては、 <strong class="command">bdist_rpm</strong> に実装されている RPM 形式、 Solaris
<strong class="program">pkgtool</strong> (<strong class="command">bdist_pkgtool</strong>) 、 HP-UX <strong class="program">swinstall</strong>
(<strong class="command">bdist_sdux</strong>) があります。例えば、以下のコマンドを実行すると、 <tt class="file docutils literal"><span class="pre">foo-1.0.noarch.rpm</span></tt>
という名前の RPM ファイルを作成します:</p>
<div class="highlight-python"><pre>python setup.py bdist_rpm</pre>
</div>
<p>(<strong class="command">bdist_rpm</strong> コマンドは <strong class="command">rpm</strong> コマンドを使うため、 Red Hat Linux や SuSE
Linux、 Mandrake Linux といった RPM ベースのシステムで実行しなければなりません)</p>
<p>どの配布形式が利用できるかは、</p>
<div class="highlight-python"><pre>python setup.py bdist --help-formats</pre>
</div>
<p>を実行すれば分かります。</p>
</div>
<div class="section" id="python">
<span id="python-terms"></span><h2>Python 一般の用語<a class="headerlink" href="#python" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このドキュメントを読んでいるのなら、モジュール (module)、拡張モジュール (extension) などが何を表すのかをよく知っているかもしれません。とはいえ、読者がみな共通のスタートポイントに立って Distutils の操作を始められるように、ここで一般的な Python 用語について以下のような用語集を示しておきます:</p>
<dl class="docutils">
<dt>モジュール (module)</dt>
<dd>Python においてコードを再利用する際の基本単位: すなわち、他のコードから import されるひとかたまりのコードです。ここでは、三種類のモジュール: pure Python モジュール、拡張モジュール、パッケージが関わってきます。</dd>
<dt>pure Python モジュール</dt>
<dd>Python で書かれ、単一の <tt class="file docutils literal"><span class="pre">.py</span></tt>  ファイル内に収められたモジュールです (<tt class="file docutils literal"><span class="pre">.pyc</span></tt> かつ/または
<tt class="file docutils literal"><span class="pre">.pyo</span></tt> ファイルと関連があります) 。 &#8220;pure モジュール  (pure module)&#8221; と呼ばれることもあります。</dd>
<dt>拡張モジュール (extension module)</dt>
<dd>Python を実装している低水準言語: Python の場合は C/C++ 、 Jython の場合は Java 、で書かれたモジュールです。通常は、動的にロードできるコンパイル済みの単一のファイルに入っています。例えば、Unix向け Python 拡張のための共有オブジェクト
(<tt class="file docutils literal"><span class="pre">.so</span></tt>) 、 Windows 向け Python 拡張のための DLL (<tt class="file docutils literal"><span class="pre">.pyd</span></tt> という拡張子が与えられています)、
Jython 拡張のための Java クラスといった具合です。 (現状では、 Distutils は Python 向けの C/C++ 拡張モジュールしか扱わないので注意してください。)</dd>
<dt>パッケージ (package)</dt>
<dd>他のモジュールが入っているモジュールです; 通常、ファイルシステム内のあるディレクトリに収められ、 <tt class="file docutils literal"><span class="pre">__init__.py</span></tt>
が入っていることで通常のディレクトリと区別できます。</dd>
<dt>ルートパッケージ (root package)</dt>
<dd>階層的なパッケージの根 (root) の部分にあたるパッケージです。(この部分には <tt class="file docutils literal"><span class="pre">__init__.py</span></tt>
ファイルがないので、本当のパッケージではありませんが、便宜上そう呼びます。) 標準ライブラリの大部分はルートパッケージに入っています、また、多くの小規模な単体のサードパーティモジュールで、他の大規模なモジュールコレクションに属していないものもここに入ります。正規のパッケージと違い、ルートパッケージ上のモジュールの実体は様々なディレクトリにあります: 実際は、 <tt class="docutils literal"><span class="pre">sys.path</span></tt> に列挙されているディレクトリ全てが、ルートパッケージに配置されるモジュールの内容に影響します。</dd>
</dl>
</div>
<div class="section" id="distutils-term">
<span id="id3"></span><h2>Distutils 固有の用語<a class="headerlink" href="#distutils-term" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下は Distutils を使って Python モジュールを配布する際に使われる特有の用語です:</p>
<dl class="docutils">
<dt>モジュール配布物 (module distribution)</dt>
<dd>一個のファイルとしてダウンロード可能なリソースの形をとり、 <em>一括して</em>  インストールされることになっている形態で配られる Python モジュールのコレクションです。よく知られたモジュール配布物には、Numeric Python、 PyXML、 PIL (the Python Imaging
Library)、 mxBase などがあります。 (<em>パッケージ (package)</em> と呼ばれることもありますが、 Python
用語としてのパッケージとは意味が違います: 一つのモジュール配布物の中には、場合によりゼロ個、一つ、それ以上の Python パッケージが入っています。)</dd>
<dt>pure モジュール配布物 (pure module distribution)</dt>
<dd>pure Python モジュールやパッケージだけが入ったモジュール配布物です。&#8221;pure 配布物 (pure distribution)&#8221; とも呼ばれます。</dd>
<dt>非 pure モジュール配布物 (non-pure module distribution)</dt>
<dd>少なくとも一つの拡張モジュールが入ったモジュール配布物です。 &#8220;非 pure 配布物&#8221;とも呼びます。</dd>
<dt>配布物ルートディレクトリ (distribution root)</dt>
<dd>ソースコードツリー (またはソース配布物) ディレクトリの最上階層で、 <tt class="file docutils literal"><span class="pre">setup.py</span></tt> のある場所です。一般的には、
<tt class="file docutils literal"><span class="pre">setup.py</span></tt> はこのディレクトリ上で実行します。</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="setupscript.html" title="setup スクリプトを書く"
             >次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="Python モジュールの配布"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="../index.html">Python 2.7ja1 documentation</a> &raquo;</li>

          <li><a href="index.html" >Python モジュールの配布</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 1990-2011, Python Software Foundation.
      最終更新: 2011-12-26
      このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/02cb752c6a9e で生成しました。
    </div>
  </body>
</html>